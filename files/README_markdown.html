<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>README.markdown</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            README.markdown
        </h1>
        <ul class="files">
            <li>README.markdown</li>
            <li>Last modified: 2010-10-31 11:39:43 -0700</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
# <a href="../classes/RTurk.html">RTurk</a> - A ridiculously simple
Mechanical Turk library in Ruby
</p>
<p>
## What&#8217;s it do?!?
</p>
<p>
<a href="../classes/RTurk.html">RTurk</a> is designed to fire off
Mechanical Turk tasks for pages that reside on an external site.
</p>
<p>
The pages could be a part of a rails app, or just a simple javascript
enabled form.
</p>
<p>
If you want to build forms that are hosted on Mechanical Turk, this is not
the library you need. You&#8217;d be better off with amazon&#8217;s
official library, in all its XML cruftiness.
</p>
<p>
## Installation
</p>
<pre>
    gem install rturk
</pre>
<p>
## Use
</p>
<p>
Let&#8217;s say you have a form at &#8220;<a
href="http://myapp.com/turkers/add_tags">myapp.com/turkers/add_tags</a>&#8220;
where Turkers can add some tags to items in your catalogue.
</p>
<p>
### Creating HIT&#8217;s
</p>
<pre>
    require 'rturk'

    RTurk.setup(YourAWSAccessKeyId, YourAWSAccessKey, :sandbox =&gt; true)
    hit = RTurk::Hit.create(:title =&gt; &quot;Add some tags to a photo&quot;) do |hit|
      hit.assignments = 2
      hit.description = 'blah'
      hit.question(&quot;http://myapp.com/turkers/add_tags&quot;,
                   :frame_height =&gt; 1000)  # pixels for iframe
      hit.reward = 0.05
      hit.qualifications.add :approval_rate, { :gt =&gt; 80 }
    end

    p hit.url #=&gt;  'https://workersandbox.mturk.com:443/mturk/preview?groupId=Q29J3XZQ1ASZH5YNKZDZ'
</pre>
<p>
### Reviewing and Approving hits HIT&#8217;s
</p>
<pre>
    hits = RTurk::Hit.all_reviewable

    puts &quot;#{hits.size} reviewable hits. \n&quot;

    unless hits.empty?
      puts &quot;Reviewing all assignments&quot;

      hits.each do |hit|
        hit.assignments.each do |assignment|
          puts assignment.answers['tags']
          assignment.approve! if assignment.status == 'Submitted'
        end
      end
    end
</pre>
<p>
### Wiping all your hits out
</p>
<pre>
    hits = RTurk::Hit.all_reviewable

    puts &quot;#{hits.size} reviewable hits. \n&quot;

    unless hits.empty?
      puts &quot;Approving all assignments and disposing of each hit!&quot;

      hits.each do |hit|
        hit.expire!
        hit.assignments.each do |assignment|
          assignment.approve!
        end
        hit.dispose!
      end
    end
</pre>
<p>
### Logging Want to see what&#8217;s going on - enable logging.
</p>
<pre>
    RTurk::logger.level = Logger::DEBUG
</pre>
<p>
## Nitty Gritty
</p>
<p>
Here&#8217;s a quick peak at what happens on the Mechanical Turk side.
</p>
<p>
A worker takes a look at your hit. The page will contain an iframe with
your question URL loaded inside of it.
</p>
<p>
Amazon will append the AssignmentID parameter to the URL for your own
information. In preview mode this will look like
</p>
<pre>
    http://myapp.com/turkers/add_tags?item_id=1234&amp;AssignmentId=ASSIGNMENT_ID_NOT_AVAILABLE
</pre>
<p>
If the Turker accepts the HIT, the page will reload and the iframe URL will
resemble
</p>
<pre>
    http://myapp.com/turkers/add_tags?item_id=1234&amp;AssignmentId=1234567890123456789ABC
</pre>
<p>
The form in your page MUST CONTAIN the AssignmentID in a hidden input
element. You could do this on the server side with a rails app, or on the
client side with javascript(check the examples)
</p>
<p>
Anything submitted in this form will be sent to Amazon and saved for your
review later.
</p>
<p>
## More information
</p>
<p>
Take a look at the [Amazon MTurk developer docs](<a
href="http://docs.amazonwebservices.com/AWSMechTurk/latest/AWSMechanicalTurkRequester/">docs.amazonwebservices.com/AWSMechTurk/latest/AWSMechanicalTurkRequester/</a>)
for more information. They have a complete list of API operations, all of
which can be called with this library.
</p>

    </div>
    

    

    
    

    
    

    

    

    

    

    

    
</div>
    </div>
  </body>
</html>